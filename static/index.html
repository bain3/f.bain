<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>f.bain</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script defer src="file.js"></script>
    <script defer src="progress.js"></script>
    <script defer src="referencer.js"></script>
    <script defer src="script.js"></script>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="landing.css">
</head>
<body>
<div id="copied-box" hidden="">Copied!</div>
<input type="file" ondrop="dropHandler(event);" x-r="fileInput" onchange="inputHandler(event);" title=" "
       autocomplete="off" class="file-input">
<div class="center click-through" x-r="container">
    <div id="welcome-div" x-r="screen.0">
        <img src="upload.svg" alt="upload file icon"/>

        <p style="margin-bottom: 0.4em;">Click or drag n' drop to upload.</p>

        <noscript style="color: var(--error)">
            In order to encrypt your files locally your browser needs to support javascript.
            Please try again with a different browser.
        </noscript>
        <p class="key-strength">key strength:
            <input type="number" value="12" min="10" max="128"
                   onchange="strength=Math.min(parseInt(this.value, 10), 128); this.value=strength;"/>
        </p>
    </div>

    <div id="progress-div" style="visibility: hidden;" x-r="screen.1">
        <div class="progress" x-r="prgrs">
            <div class="progress-value" x-r="prgrs.value"></div>
        </div>
        <p x-r="prgrs.status"></p>
    </div>

    <div id="success-div" x-r="screen.2" hidden>
        <p class="url" x-r="out.url" onclick="copyToClipboard(this);">
            https://f.bain.cz/nothing
        </p>

        <input type="checkbox" id="store-rt" x-r="out.rt.store" oninput="storeRevocationToken(this.checked)"
               style="margin-top: 1em"/>
        <label for="store-rt">store revocation token in this browser</label>

        <p style="font-size: x-small; margin-top: 0;">(you won't be able to delete the file without it)</p>
        <p style="margin-bottom: 0;" x-r="out.rt" hidden>Your revocation token is:<br>
            <span x-r="out.rt.value" style="color: var(--white); cursor: copy;" onclick="copyToClipboard(this)"></span>
        </p>
    </div>
</div>
<div style="position: absolute; bottom: 15px; left: 50%; transform: translateX(-50%); z-index: 20; text-align: center">
    <p style="font-size: small;">Max file size: <span style="color: var(--white)" x-r="filesize">0B</span></p>

    <p style="font-size: small;">End to end encrypted file sharing. Ignorance is bliss.</p>

    <p>
        <a href="https://github.com/bain3/f.bain#how-does-it-work" target="_blank" rel="noopener noreferrer">
            How does it work?</a>,
        <a href="revoke.html" target="_blank"><b>Revoke a file</b></a>
    </p>
</div>
</body>
</html>